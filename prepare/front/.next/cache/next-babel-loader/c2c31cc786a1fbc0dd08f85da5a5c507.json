{"ast":null,"code":"var _jsxFileName = \"/Users/gojieun/Desktop/meong/prepare/front/components/PostForm.js\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { Form, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addPost, ADD_POST_REQUEST, LOAD_POST_REQUEST } from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport { DownloadOutlined } from '@ant-design/icons';\nimport { LOAD_USER_REQUEST } from '../reducers/user';\nconst SubmitBtn = styled(Button)`\n    background-color: #FFF3D4;\n    color: #857171;\n    border: none;\n    max-width: 600px;\n    margin: 20px auto;\n    width: 100%;\n    margin-bottom: 40px;\n    height: 40px;\n    font-weight: 500;\n\n    &:hover {\n        background-color: #857171;\n        border: 1px solid #857171;\n        color: white;\n    }\n`;\nconst FileUploadWrapper = styled.div`\n\n#file[type=\"file\"] {\n\tdisplay: none;\n}\n\n.label-holder {\n  margin-top: 1em;\n  display: grid;\n  place-items: center;\n  width: 100%;\n  height: 30vh;\n}\n\n.label{\n  display: grid;\n  place-items: center;\n  font-size: 1rem;\n  cursor: pointer;\n  border: 2px dashed gray;\n  border-radius: 5px;\n  width: 100%;\n  padding: 10vh 0;\n}\n\n.label > span {\n    display: flex;\n    flex-direction: column;\n    font-weight: 500;\n    font-size: 1.1rem;\n    color: gray;\n}\n\n.result{\n  width: 100%;\n  margin-top:1rem;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n}\n\nimg{\n  width: 25%;\n  height: 150px;\n  object-fit: fill;\n  padding: 0.5rem;\n}\n`;\n\nconst PostForm = () => {\n  const {\n    imagePaths,\n    addPostDone,\n    addPostLoading\n  } = useSelector(state => state.post);\n  const dispatch = useDispatch();\n  const [text, onChangeText, setText] = useInput('');\n  useEffect(() => {\n    if (addPostDone) {\n      setText('');\n    }\n  }, [addPostDone]);\n  useEffect(() => {\n    dispatch({\n      type: LOAD_USER_REQUEST\n    });\n    dispatch({\n      type: LOAD_POST_REQUEST\n    });\n  }, []);\n  const onSubmit = useCallback(() => {\n    dispatch(addPost(text));\n  }, [text]);\n  const {\n    0: selectedImages,\n    1: setSelectedImages\n  } = useState([]);\n  const imageHandleChange = useCallback(e => {\n    if (e.target.files) {\n      const filesArray = Array.from(e.target.files).map(file => URL.createObjectURL(file));\n      setSelectedImages(prevImages => prevImages.concat(filesArray));\n      Array.from(e.target.files).map(file => URL.revokeObjectURL(file));\n    }\n  });\n\n  const renderImages = source => {\n    console.log(\"source: \", source);\n    return source.map(image => {\n      return __jsx(\"img\", {\n        src: image,\n        key: image,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 20\n        }\n      });\n    });\n  };\n\n  return __jsx(Form, {\n    className: Wrapper.pageWrapper,\n    style: {\n      margin: '10px 0 20px'\n    },\n    encType: \"multipart/form-data\",\n    onFinish: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, __jsx(FileUploadWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    multiple: true,\n    onChange: imageHandleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"label-holder\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, __jsx(DownloadOutlined, {\n    style: {\n      fontSize: '30px',\n      marginBottom: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }), \"Upload Images\"))), __jsx(\"div\", {\n    className: \"result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, renderImages(selectedImages))), imagePaths.map(v => __jsx(\"div\", {\n    key: v,\n    style: {\n      display: 'inline-block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, __jsx(\"img\", {\n    src: v,\n    style: {\n      width: '200px'\n    },\n    alt: v,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"\\uC81C\\uAC70\")))), __jsx(Input.TextArea, {\n    value: text,\n    onChange: onChangeText,\n    rows: 10,\n    placeholder: \"\\uBC18\\uB824\\uB3D9\\uBB3C\\uC5D0 \\uB300\\uD55C \\uC790\\uC720\\uB85C\\uC6B4 \\uAE00\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 \\uD83D\\uDC36 \\uD83D\\uDC39\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }), __jsx(SubmitBtn, {\n    htmlType: \"submit\",\n    loading: addPostLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, \"\\uC791\\uC131\\uC644\\uB8CC\")));\n};\n\nexport default PostForm;","map":{"version":3,"names":["React","useCallback","useState","useRef","useEffect","Form","Input","Button","useDispatch","useSelector","addPost","ADD_POST_REQUEST","LOAD_POST_REQUEST","styled","Wrapper","useInput","DownloadOutlined","LOAD_USER_REQUEST","SubmitBtn","FileUploadWrapper","div","PostForm","imagePaths","addPostDone","addPostLoading","state","post","dispatch","text","onChangeText","setText","type","onSubmit","selectedImages","setSelectedImages","imageHandleChange","e","target","files","filesArray","Array","from","map","file","URL","createObjectURL","prevImages","concat","revokeObjectURL","renderImages","source","console","log","image","pageWrapper","margin","fontSize","marginBottom","v","display","width"],"sources":["/Users/gojieun/Desktop/meong/prepare/front/components/PostForm.js"],"sourcesContent":["import React, { useCallback, useState, useRef, useEffect } from 'react';\nimport {Form, Input, Button} from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {addPost, ADD_POST_REQUEST, LOAD_POST_REQUEST} from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport {DownloadOutlined} from '@ant-design/icons';\nimport { LOAD_USER_REQUEST } from '../reducers/user';\n\n\nconst SubmitBtn = styled(Button)`\n    background-color: #FFF3D4;\n    color: #857171;\n    border: none;\n    max-width: 600px;\n    margin: 20px auto;\n    width: 100%;\n    margin-bottom: 40px;\n    height: 40px;\n    font-weight: 500;\n\n    &:hover {\n        background-color: #857171;\n        border: 1px solid #857171;\n        color: white;\n    }\n`;\n\nconst FileUploadWrapper = styled.div`\n\n#file[type=\"file\"] {\n\tdisplay: none;\n}\n\n.label-holder {\n  margin-top: 1em;\n  display: grid;\n  place-items: center;\n  width: 100%;\n  height: 30vh;\n}\n\n.label{\n  display: grid;\n  place-items: center;\n  font-size: 1rem;\n  cursor: pointer;\n  border: 2px dashed gray;\n  border-radius: 5px;\n  width: 100%;\n  padding: 10vh 0;\n}\n\n.label > span {\n    display: flex;\n    flex-direction: column;\n    font-weight: 500;\n    font-size: 1.1rem;\n    color: gray;\n}\n\n.result{\n  width: 100%;\n  margin-top:1rem;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n}\n\nimg{\n  width: 25%;\n  height: 150px;\n  object-fit: fill;\n  padding: 0.5rem;\n}\n`;\n\n\nconst PostForm = () => {\n    const { imagePaths, addPostDone, addPostLoading } = useSelector((state) => state.post);\n    const dispatch = useDispatch();\n    const [text, onChangeText, setText] = useInput('');\n    \n    useEffect(() => {\n        if (addPostDone) {\n            setText('');\n        }\n    }, [addPostDone])\n    \n    \n        useEffect(() => {\n            dispatch({\n              type: LOAD_USER_REQUEST,\n            });\n            dispatch({\n              type: LOAD_POST_REQUEST,\n            });\n          }, []);\n    const onSubmit = useCallback(() => {\n        dispatch(addPost(text));\n    },[text])\n    \n    const [selectedImages, setSelectedImages] = useState([]);\n\n    const imageHandleChange = useCallback((e) => {\n        if(e.target.files) {\n            const filesArray = Array.from(e.target.files).map((file) => URL.createObjectURL(file))\n            \n            setSelectedImages((prevImages) => prevImages.concat(filesArray))\n            Array.from(e.target.files).map((file) => URL.revokeObjectURL(file))\n        }\n    })\n\n    const renderImages = (source) => {\n        console.log(\"source: \", source);\n        return source.map((image) => {\n            return <img src={image} key={image} />\n        })\n    }\n\n    return (\n        <Form \n            className={Wrapper.pageWrapper} \n            style={{margin: '10px 0 20px'}} \n            encType='multipart/form-data' \n            onFinish={onSubmit}>\n            <FileUploadWrapper>\n                <input type=\"file\" id=\"file\" multiple onChange={imageHandleChange} />\n                <div className=\"label-holder\" >\n                    <label htmlFor='file' className='label'>\n                        <span>\n                            <DownloadOutlined style={{fontSize: '30px', marginBottom: '10px'}}/>\n                            Upload Images\n                        </span>\n                    </label>\n                </div>\n                <div className='result'>{renderImages(selectedImages)}</div>\n            </FileUploadWrapper>\n            {imagePaths.map((v) => (\n                <div key={v} style={{display: 'inline-block'}}>\n                    <img src={v} style={{width: '200px'}} alt={v} />\n                    <div>\n                        <Button>제거</Button>\n                    </div>\n                </div>\n            ))}\n            <Input.TextArea\n                value={text}\n                onChange={onChangeText}\n                rows={10}\n                placeholder='반려동물에 대한 자유로운 글을 작성해주세요 🐶 🐹'\n            />\n            <SubmitBtn htmlType='submit' loading={addPostLoading}>\n                <span>작성완료</span>\n            </SubmitBtn>\n        </Form>\n    );\n};\n\nexport default PostForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}