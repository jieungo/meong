{"ast":null,"code":"import { all, fork, put, delay, takeLatest, call } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, LOG_OUT_SUCCESS, LOG_OUT_REQUEST, LOG_OUT_FAILURE, SIGN_UP_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS, UNFOLLOW_FAILURE, UNFOLLOW_REQUEST, UNFOLLOW_SUCCESS, FOLLOW_FAILURE, FOLLOW_SUCCESS, FOLLOW_REQUEST, LOAD_USER_SUCCESS } from '../reducers/user';\n\nfunction loadUserAPI() {\n  return axios.get('/user');\n}\n\nfunction* loadUser(action) {\n  try {\n    const result = yield call(loadUserAPI, action.data);\n    yield put({\n      type: LOAD_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: LOAD_USER_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction logInAPI(data) {\n  //실제 서버에 데이터를 보내는 부분. *붙이지 않는다. data는 action.data\n  return axios.post('/user/login', data, {\n    withCredentials: true\n  });\n}\n\nfunction* logIn(action) {\n  //LOG_IN_REQUEST에 대한 매개변수가 여기로 전달이 된다. action.data는 로그인리퀘스트의 데이터\n  try {\n    const result = yield call(logInAPI, action.data); //loginAPI 실행하고 결괏값을 result로 받음.\n\n    yield put({\n      //put은 디스패치!\n      type: LOG_IN_SUCCESS,\n      data: result.data // data: result.data\t//result.data는 API에서의 요청 성공 결과\n\n    });\n  } catch (err) {\n    console.log(err);\n    yield put({\n      type: LOG_IN_FAILURE,\n      data: err.response.data //실패결과\n\n    });\n  }\n}\n\nfunction logOutAPI() {\n  return axios.post('/user/logout', null, {\n    withCredentials: true\n  });\n}\n\nfunction* logOut() {\n  try {\n    yield call(logOutAPI);\n    yield put({\n      type: LOG_OUT_SUCCESS\n    });\n  } catch (err) {\n    yield put({\n      type: LOG_OUT_FAILURE,\n      data: err.response.data\n    });\n  }\n}\n\nfunction signUpAPI(data) {\n  return axios.post('http://localhost:3065/user', data); //여긴 제너레이터X. 실제로 서버에 요청을 보냄\n}\n\nfunction* signUp(action) {\n  try {\n    const result = yield call(signUpAPI, action.data); //위의 리턴값을 result에 받음\n\n    console.log(result);\n    yield put({\n      type: SIGN_UP_SUCCESS\n    });\n  } catch (err) {\n    yield put({\n      // put은 dispatch. 밑의 action을 dispatch\n      type: SIGN_UP_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction unFollowAPI() {\n  return axios.post('/api/unFollow');\n}\n\nfunction* unFollow(action) {\n  try {\n    yield delay(1000);\n    yield put({\n      type: UNFOLLOW_SUCCESS,\n      data: action.data\n    });\n  } catch (err) {\n    yield delay(1000);\n    yield put({\n      type: UNFOLLOW_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction followAPI() {\n  return axios.post('/api/follow');\n}\n\nfunction* follow(action) {\n  try {\n    yield delay(1000);\n    yield put({\n      type: FOLLOW_SUCCESS,\n      data: action.data\n    });\n  } catch (err) {\n    yield delay(1000);\n    yield put({\n      type: FOLLOW_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction* watchLogIn() {\n  // LOG_IN 액션 실행하면 뒤의 logIn 함수를 실행한다.\n  yield takeLatest(LOG_IN_REQUEST, logIn);\n}\n\nfunction* watchLogOut() {\n  yield takeLatest(LOG_OUT_REQUEST, logOut);\n}\n\nfunction* watchSignUp() {\n  yield takeLatest(SIGN_UP_REQUEST, signUp); //take, call 등 이펙트 앞에는 꼭 yield 붙임\n}\n\nfunction* watchFollow() {\n  yield takeLatest(FOLLOW_REQUEST, follow);\n}\n\nfunction* watchUnFollow() {\n  yield takeLatest(UNFOLLOW_REQUEST, unFollow);\n}\n\nfunction* watchLoadUser() {\n  yield takeLatest(LOAD_USER_REQUEST, loadUser);\n}\n\nexport default function* userSaga() {\n  yield all([fork(watchLogIn), fork(watchLogOut), fork(watchSignUp), fork(watchFollow), fork(watchUnFollow), fork(watchLoadUser)]);\n}","map":{"version":3,"names":["all","fork","put","delay","takeLatest","call","axios","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILURE","LOG_OUT_SUCCESS","LOG_OUT_REQUEST","LOG_OUT_FAILURE","SIGN_UP_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","UNFOLLOW_FAILURE","UNFOLLOW_REQUEST","UNFOLLOW_SUCCESS","FOLLOW_FAILURE","FOLLOW_SUCCESS","FOLLOW_REQUEST","LOAD_USER_SUCCESS","loadUserAPI","get","loadUser","action","result","data","type","err","console","error","LOAD_USER_FAILURE","response","logInAPI","post","withCredentials","logIn","log","logOutAPI","logOut","signUpAPI","signUp","unFollowAPI","unFollow","followAPI","follow","watchLogIn","watchLogOut","watchSignUp","watchFollow","watchUnFollow","watchLoadUser","LOAD_USER_REQUEST","userSaga"],"sources":["/Users/gojieun/Desktop/meong/prepare/front/sagas/user.js"],"sourcesContent":["import { all, fork, put, delay, takeLatest, call } from 'redux-saga/effects';\nimport axios from 'axios';\nimport {\n    LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE,\n    LOG_OUT_SUCCESS, LOG_OUT_REQUEST, LOG_OUT_FAILURE,\n    SIGN_UP_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS,\n    UNFOLLOW_FAILURE, UNFOLLOW_REQUEST, UNFOLLOW_SUCCESS,\n    FOLLOW_FAILURE, FOLLOW_SUCCESS, FOLLOW_REQUEST, LOAD_USER_SUCCESS} from '../reducers/user';\n\nfunction loadUserAPI() {\n    return axios.get('/user');\n    }\n    \nfunction* loadUser(action) {\n    try {\n        const result = yield call(loadUserAPI, action.data);\n        yield put({\n        type: LOAD_USER_SUCCESS,\n        data: result.data,\n        });\n    } catch (err) {\n        console.error(err);\n        yield put({\n        type: LOAD_USER_FAILURE,\n        error: err.response.data,\n        });\n    }\n}\n\nfunction logInAPI(data) { //실제 서버에 데이터를 보내는 부분. *붙이지 않는다. data는 action.data\n\treturn axios.post('/user/login', data, { withCredentials: true })\n}\n\nfunction* logIn(action) { //LOG_IN_REQUEST에 대한 매개변수가 여기로 전달이 된다. action.data는 로그인리퀘스트의 데이터\ntry {\n\tconst result = yield call(logInAPI, action.data) //loginAPI 실행하고 결괏값을 result로 받음.\n    yield put({ //put은 디스패치!\n\t\ttype: LOG_IN_SUCCESS,\n        data: result.data,\n\t\t// data: result.data\t//result.data는 API에서의 요청 성공 결과\n\t});\n} catch (err) {\n    console.log(err);\n\tyield put({\n\t\ttype: LOG_IN_FAILURE,\n\t\tdata: err.response.data, //실패결과\n\t})\n}}\n\nfunction logOutAPI() {\n\treturn axios.post('/user/logout', null, { withCredentials: true });\n}\n\nfunction* logOut() {\ntry {\n\tyield call(logOutAPI)\n\tyield put({\n\t\ttype: LOG_OUT_SUCCESS,\n\t});\n} catch (err) {\n\tyield put({\n\t\ttype: LOG_OUT_FAILURE,\n\t\tdata: err.response.data,\n\t})\n}}\n\nfunction signUpAPI(data) {\n    return axios.post('http://localhost:3065/user', data); //여긴 제너레이터X. 실제로 서버에 요청을 보냄\n}\n\nfunction* signUp(action) {\n    try {\n        const result = yield call(signUpAPI, action.data) //위의 리턴값을 result에 받음\n        console.log(result);\n        yield put({\n            type: SIGN_UP_SUCCESS,\n        })\n    } catch(err) {\n        yield put({ // put은 dispatch. 밑의 action을 dispatch\n            type: SIGN_UP_FAILURE,\n            error:err.response.data,\n        })\n    }\n}\n\nfunction unFollowAPI() {\n    return axios.post('/api/unFollow')\n}\n\nfunction* unFollow(action) {\n    try {\n        yield delay(1000);\n        yield put({\n            type: UNFOLLOW_SUCCESS,\n            data: action.data,\n        })\n    } catch(err) {\n        yield delay(1000);\n        yield put({ \n            type: UNFOLLOW_FAILURE,\n            error:err.response.data\n        })\n    }\n}\n\nfunction followAPI() {\n    return axios.post('/api/follow')\n}\n\nfunction* follow(action) {\n    try {\n        yield delay(1000);\n        yield put({\n            type: FOLLOW_SUCCESS,\n            data: action.data,\n        })\n    } catch(err) {\n        yield delay(1000);\n        yield put({ \n            type: FOLLOW_FAILURE,\n            error:err.response.data\n        })\n    }\n}\n\nfunction* watchLogIn() { // LOG_IN 액션 실행하면 뒤의 logIn 함수를 실행한다.\n\tyield takeLatest(LOG_IN_REQUEST, logIn);\n}\n\nfunction* watchLogOut() {\n\tyield takeLatest(LOG_OUT_REQUEST, logOut);\n}\n\nfunction* watchSignUp() {\n    yield takeLatest(SIGN_UP_REQUEST, signUp); //take, call 등 이펙트 앞에는 꼭 yield 붙임\n}\n\nfunction* watchFollow() {\n\tyield takeLatest(FOLLOW_REQUEST, follow);\n}\n\nfunction* watchUnFollow() {\n\tyield takeLatest(UNFOLLOW_REQUEST, unFollow);\n}\n\nfunction* watchLoadUser() {\n    yield takeLatest(LOAD_USER_REQUEST, loadUser);\n}\n\n\nexport default function* userSaga() {\n    yield all([\n        fork(watchLogIn),\n        fork(watchLogOut),\n\t\tfork(watchSignUp),\n\t\tfork(watchFollow),\n\t\tfork(watchUnFollow),\n        fork(watchLoadUser),\n    ])\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}