{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { Form, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ADD_POST_REQUEST } from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport { DownloadOutlined } from '@ant-design/icons';\nconst SubmitBtn = styled(Button)`\n    background-color: #FFF3D4;\n    color: #857171;\n    border: none;\n    max-width: 600px;\n    margin: 20px auto;\n    width: 100%;\n    margin-bottom: 40px;\n    height: 40px;\n    font-weight: 500;\n\n    &:hover {\n        background-color: #857171;\n        border: 1px solid #857171;\n        color: white;\n    }\n`;\nconst FileUploadWrapper = styled.div`\n\n#file[type=\"file\"] {\n\tdisplay: none;\n}\n\n.label-holder {\n  margin-top: 1em;\n  display: grid;\n  place-items: center;\n  width: 100%;\n  height: 30vh;\n}\n\n.label{\n  display: grid;\n  place-items: center;\n  font-size: 1rem;\n  cursor: pointer;\n  border: 2px dashed gray;\n  border-radius: 5px;\n  width: 100%;\n  padding: 10vh 0;\n}\n\n.label > span {\n    display: flex;\n    flex-direction: column;\n    font-weight: 500;\n    font-size: 1.1rem;\n    color: gray;\n}\n\n.result{\n  width: 100%;\n  margin-top:1rem;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n}\n\nimg{\n  width: 25%;\n  height: 150px;\n  object-fit: fill;\n  padding: 0.5rem;\n}\n`;\n\nconst PostForm = () => {\n  const {\n    imagePaths,\n    addPostDone,\n    addPostLoading\n  } = useSelector(state => state.post);\n  const dispatch = useDispatch();\n  const [text, onChangeText, setText] = useInput('');\n  useEffect(() => {\n    if (addPostDone) {\n      setText('');\n    }\n  }, [addPostDone]);\n  const onSubmit = useCallback(() => {\n    dispatch({\n      type: ADD_POST_REQUEST,\n      data: text\n    });\n  }, [text]);\n  const {\n    0: selectedImages,\n    1: setSelectedImages\n  } = useState([]);\n  const imageHandleChange = useCallback(e => {\n    if (e.target.files) {\n      const filesArray = Array.from(e.target.files).map(file => URL.createObjectURL(file));\n      setSelectedImages(prevImages => prevImages.concat(filesArray));\n      Array.from(e.target.files).map(file => URL.revokeObjectURL(file));\n    }\n  });\n\n  const renderImages = source => {\n    console.log(\"source: \", source);\n    return source.map(image => {\n      return __jsx(\"img\", {\n        src: image,\n        key: image\n      });\n    });\n  };\n\n  return __jsx(Form, {\n    className: Wrapper.pageWrapper,\n    style: {\n      margin: '10px 0 20px'\n    },\n    encType: \"multipart/form-data\",\n    onFinish: onSubmit\n  }, __jsx(FileUploadWrapper, null, __jsx(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    multiple: true,\n    onChange: imageHandleChange\n  }), __jsx(\"div\", {\n    className: \"label-holder\"\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"label\"\n  }, __jsx(\"span\", null, __jsx(DownloadOutlined, {\n    style: {\n      fontSize: '30px',\n      marginBottom: '10px'\n    }\n  }), \"Upload Images\"))), __jsx(\"div\", {\n    className: \"result\"\n  }, renderImages(selectedImages))), imagePaths.map(v => __jsx(\"div\", {\n    key: v,\n    style: {\n      display: 'inline-block'\n    }\n  }, __jsx(\"img\", {\n    src: v,\n    style: {\n      width: '200px'\n    },\n    alt: v\n  }), __jsx(\"div\", null, __jsx(Button, null, \"\\uC81C\\uAC70\")))), __jsx(Input.TextArea, {\n    value: text,\n    onChange: onChangeText,\n    rows: 10,\n    placeholder: \"\\uBC18\\uB824\\uB3D9\\uBB3C\\uC5D0 \\uB300\\uD55C \\uC790\\uC720\\uB85C\\uC6B4 \\uAE00\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 \\uD83D\\uDC36 \\uD83D\\uDC39\"\n  }), __jsx(SubmitBtn, {\n    htmlType: \"submit\",\n    loading: addPostLoading\n  }, __jsx(\"span\", null, \"\\uC791\\uC131\\uC644\\uB8CC\")));\n};\n\nexport default PostForm;","map":null,"metadata":{},"sourceType":"module"}