{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/gojieun/Desktop/meong/prepare/front/pages/map.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { SIGN_UP_REQUEST } from '../reducers/user';\nimport Head from 'next/head';\nimport AppLayout from '../components/AppLayout';\nimport KakaomapComponent from \"../src/KakaomapComponent\";\nimport OtherLayout from '../components/OtherLayout';\n\nvar Map = function Map() {\n  _s();\n\n  var _useState = useState(),\n      info = _useState[0],\n      setInfo = _useState[1];\n\n  var _useState2 = useState([]),\n      markers = _useState2[0],\n      setMarkers = _useState2[1];\n\n  var _useState3 = useState(),\n      map = _useState3[0],\n      setMap = _useState3[1];\n\n  useEffect(function () {\n    if (!map) return;\n    var ps = new kakao.maps.services.Places();\n    ps.keywordSearch(\"이태원 맛집\", function (data, status, _pagination) {\n      if (status === kakao.maps.services.Status.OK) {\n        // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해\n        // LatLngBounds 객체에 좌표를 추가합니다\n        var bounds = new kakao.maps.LatLngBounds();\n        var _markers = [];\n\n        for (var i = 0; i < data.length; i++) {\n          // @ts-ignore\n          _markers.push({\n            position: {\n              lat: data[i].y,\n              lng: data[i].x\n            },\n            content: data[i].place_name\n          }); // @ts-ignore\n\n\n          bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\n        }\n\n        setMarkers(_markers); // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다\n\n        map.setBounds(bounds);\n      }\n    });\n  }, [map]);\n  return __jsx(Map // 로드뷰를 표시할 Container\n  , {\n    center: {\n      lat: 37.566826,\n      lng: 126.9786567\n    },\n    style: {\n      width: \"100%\",\n      height: \"350px\"\n    },\n    level: 3,\n    onCreate: setMap,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, markers.map(function (marker) {\n    return __jsx(MapMarker, {\n      key: \"marker-\".concat(marker.content, \"-\").concat(marker.position.lat, \",\").concat(marker.position.lng),\n      position: marker.position,\n      onClick: function onClick() {\n        return setInfo(marker);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, info && info.content === marker.content && __jsx(\"div\", {\n      style: {\n        color: \"#000\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, marker.content));\n  }));\n};\n\n_s(Map, \"f2yL4SDcQFv3N0MGP6HnAT7tEhM=\");\n\n_c = Map;\nexport var __N_SSP = true;\nexport default Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useCallback","useState","useEffect","SIGN_UP_REQUEST","Head","AppLayout","KakaomapComponent","OtherLayout","Map","info","setInfo","markers","setMarkers","map","setMap","ps","kakao","maps","services","Places","keywordSearch","data","status","_pagination","Status","OK","bounds","LatLngBounds","i","length","push","position","lat","y","lng","x","content","place_name","extend","LatLng","setBounds","width","height","marker","color"],"sources":["/Users/gojieun/Desktop/meong/prepare/front/pages/map.js"],"sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { END } from 'redux-saga';\nimport { LOAD_MY_INFO_REQUEST, SIGN_UP_REQUEST } from '../reducers/user';\nimport wrapper from '../store/configureStore';\nimport Head from 'next/head';\nimport AppLayout from '../components/AppLayout';\nimport KakaomapComponent from \"../src/KakaomapComponent\";\nimport OtherLayout from '../components/OtherLayout';\n\n\nconst Map = () => {\n    const [info, setInfo] = useState()\n    const [markers, setMarkers] = useState([])\n    const [map, setMap] = useState()\n  \n    useEffect(() => {\n      if (!map) return\n      const ps = new kakao.maps.services.Places()\n  \n      ps.keywordSearch(\"이태원 맛집\", (data, status, _pagination) => {\n        if (status === kakao.maps.services.Status.OK) {\n          // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해\n          // LatLngBounds 객체에 좌표를 추가합니다\n          const bounds = new kakao.maps.LatLngBounds()\n          let markers = []\n  \n          for (var i = 0; i < data.length; i++) {\n            // @ts-ignore\n            markers.push({\n              position: {\n                lat: data[i].y,\n                lng: data[i].x,\n              },\n              content: data[i].place_name,\n            })\n            // @ts-ignore\n            bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x))\n          }\n          setMarkers(markers)\n  \n          // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다\n          map.setBounds(bounds)\n        }\n      })\n    }, [map])\n  \n    return (\n      <Map // 로드뷰를 표시할 Container\n        center={{\n          lat: 37.566826,\n          lng: 126.9786567,\n        }}\n        style={{\n          width: \"100%\",\n          height: \"350px\",\n        }}\n        level={3}\n        onCreate={setMap}\n      >\n        {markers.map((marker) => (\n          <MapMarker\n            key={`marker-${marker.content}-${marker.position.lat},${marker.position.lng}`}\n            position={marker.position}\n            onClick={() => setInfo(marker)}\n          >\n            {info &&info.content === marker.content && (\n              <div style={{color:\"#000\"}}>{marker.content}</div>\n            )}\n          </MapMarker>\n        ))}\n      </Map>\n    )\n  }\n\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\n    console.log('getServerSideProps start');\n    console.log(context.req.headers);\n    const cookie = context.req ? context.req.headers.cookie : '';\n    axios.defaults.headers.Cookie = '';\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch(END);\n    console.log('getServerSideProps end');\n    await context.store.sagaTask.toPromise();\n  });\n\nexport default Map;"],"mappings":"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"},"metadata":{},"sourceType":"module"}