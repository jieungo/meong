{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { Form, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ADD_POST_REQUEST } from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport { DownloadOutlined } from '@ant-design/icons';\nvar SubmitBtn = styled(Button)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    background-color: #FFF3D4;\\n    color: #857171;\\n    border: none;\\n    max-width: 600px;\\n    margin: 20px auto;\\n    width: 100%;\\n    margin-bottom: 40px;\\n    height: 40px;\\n    font-weight: 500;\\n\\n    &:hover {\\n        background-color: #857171;\\n        border: 1px solid #857171;\\n        color: white;\\n    }\\n\"])));\nvar FileUploadWrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n\\n#file[type=\\\"file\\\"] {\\n\\tdisplay: none;\\n}\\n\\n.label-holder {\\n  margin-top: 1em;\\n  display: grid;\\n  place-items: center;\\n  width: 100%;\\n  height: 30vh;\\n}\\n\\n.label{\\n  display: grid;\\n  place-items: center;\\n  font-size: 1rem;\\n  cursor: pointer;\\n  border: 2px dashed gray;\\n  border-radius: 5px;\\n  width: 100%;\\n  padding: 10vh 0;\\n}\\n\\n.label > span {\\n    display: flex;\\n    flex-direction: column;\\n    font-weight: 500;\\n    font-size: 1.1rem;\\n    color: gray;\\n}\\n\\n.result{\\n  width: 100%;\\n  margin-top:1rem;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: left;\\n}\\n\\nimg{\\n  width: 25%;\\n  height: 150px;\\n  object-fit: fill;\\n  padding: 0.5rem;\\n}\\n\"])));\n\nvar PostForm = function PostForm() {\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      imagePaths = _useSelector.imagePaths,\n      addPostDone = _useSelector.addPostDone,\n      addPostLoading = _useSelector.addPostLoading;\n\n  var dispatch = useDispatch();\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      text = _useInput2[0],\n      onChangeText = _useInput2[1],\n      setText = _useInput2[2];\n\n  useEffect(function () {\n    if (addPostDone) {\n      setText('');\n    }\n  }, [addPostDone]);\n  var onSubmit = useCallback(function () {\n    dispatch({\n      type: ADD_POST_REQUEST,\n      data: text\n    });\n  }, [text]);\n\n  var _useState = useState([]),\n      selectedImages = _useState[0],\n      setSelectedImages = _useState[1];\n\n  var imageHandleChange = useCallback(function (e) {\n    if (e.target.files) {\n      var filesArray = Array.from(e.target.files).map(function (file) {\n        return URL.createObjectURL(file);\n      });\n      setSelectedImages(function (prevImages) {\n        return prevImages.concat(filesArray);\n      });\n      Array.from(e.target.files).map(function (file) {\n        return URL.revokeObjectURL(file);\n      });\n    }\n  });\n\n  var renderImages = function renderImages(source) {\n    console.log(\"source: \", source);\n    return source.map(function (image) {\n      return __jsx(\"img\", {\n        src: image,\n        key: image\n      });\n    });\n  };\n\n  return __jsx(Form, {\n    className: Wrapper.pageWrapper,\n    style: {\n      margin: '10px 0 20px'\n    },\n    encType: \"multipart/form-data\",\n    onFinish: onSubmit\n  }, __jsx(FileUploadWrapper, null, __jsx(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    multiple: true,\n    onChange: imageHandleChange\n  }), __jsx(\"div\", {\n    className: \"label-holder\"\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"label\"\n  }, __jsx(\"span\", null, __jsx(DownloadOutlined, {\n    style: {\n      fontSize: '30px',\n      marginBottom: '10px'\n    }\n  }), \"Upload Images\"))), __jsx(\"div\", {\n    className: \"result\"\n  }, renderImages(selectedImages))), imagePaths.map(function (v) {\n    return __jsx(\"div\", {\n      key: v,\n      style: {\n        display: 'inline-block'\n      }\n    }, __jsx(\"img\", {\n      src: v,\n      style: {\n        width: '200px'\n      },\n      alt: v\n    }), __jsx(\"div\", null, __jsx(Button, null, \"\\uC81C\\uAC70\")));\n  }), __jsx(Input.TextArea, {\n    value: text,\n    onChange: onChangeText,\n    rows: 10,\n    placeholder: \"\\uBC18\\uB824\\uB3D9\\uBB3C\\uC5D0 \\uB300\\uD55C \\uC790\\uC720\\uB85C\\uC6B4 \\uAE00\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 \\uD83D\\uDC36 \\uD83D\\uDC39\"\n  }), __jsx(SubmitBtn, {\n    htmlType: \"submit\",\n    loading: addPostLoading\n  }, __jsx(\"span\", null, \"\\uC791\\uC131\\uC644\\uB8CC\")));\n};\n\nexport default PostForm;","map":null,"metadata":{},"sourceType":"module"}