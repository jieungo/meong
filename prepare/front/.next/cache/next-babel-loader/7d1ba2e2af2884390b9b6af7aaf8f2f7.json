{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _this = this,\n    _jsxFileName = \"/Users/gojieun/Desktop/meong/prepare/front/components/PostForm.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useRef, useEffect } from 'react';\nimport { Form, Input, Button } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ADD_POST_REQUEST } from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport { DownloadOutlined } from '@ant-design/icons';\nvar SubmitBtn = styled(Button)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    background-color: #FFF3D4;\\n    color: #857171;\\n    border: none;\\n    max-width: 600px;\\n    margin: 20px auto;\\n    width: 100%;\\n    margin-bottom: 40px;\\n    height: 40px;\\n    font-weight: 500;\\n\\n    &:hover {\\n        background-color: #857171;\\n        border: 1px solid #857171;\\n        color: white;\\n    }\\n\"])));\n_c = SubmitBtn;\nvar FileUploadWrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n\\n#file[type=\\\"file\\\"] {\\n\\tdisplay: none;\\n}\\n\\n.label-holder {\\n  margin-top: 1em;\\n  display: grid;\\n  place-items: center;\\n  width: 100%;\\n  height: 30vh;\\n}\\n\\n.label{\\n  display: grid;\\n  place-items: center;\\n  font-size: 1rem;\\n  cursor: pointer;\\n  border: 2px dashed gray;\\n  border-radius: 5px;\\n  width: 100%;\\n  padding: 10vh 0;\\n}\\n\\n.label > span {\\n    display: flex;\\n    flex-direction: column;\\n    font-weight: 500;\\n    font-size: 1.1rem;\\n    color: gray;\\n}\\n\\n.result{\\n  width: 100%;\\n  margin-top:1rem;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: left;\\n}\\n\\nimg{\\n  width: 25%;\\n  height: 150px;\\n  object-fit: fill;\\n  padding: 0.5rem;\\n}\\n\"])));\n_c2 = FileUploadWrapper;\n\nvar PostForm = function PostForm() {\n  _s();\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      imagePaths = _useSelector.imagePaths,\n      addPostDone = _useSelector.addPostDone,\n      addPostLoading = _useSelector.addPostLoading;\n\n  var dispatch = useDispatch();\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      text = _useInput2[0],\n      onChangeText = _useInput2[1],\n      setText = _useInput2[2];\n\n  useEffect(function () {\n    if (addPostDone) {\n      setText('');\n    }\n  }, [addPostDone]);\n  var onSubmit = useCallback(function () {\n    if (!text || !text.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    var formData = new FormData();\n    imagePaths.forEach(function (p) {\n      formData.append('image', p);\n    });\n    formData.append('content', text);\n    return dispatch({\n      type: ADD_POST_REQUEST,\n      data: formData\n    });\n  }, [text, imagePaths]);\n\n  var _useState = useState([]),\n      selectedImages = _useState[0],\n      setSelectedImages = _useState[1];\n\n  var imageHandleChange = useCallback(function (e) {\n    if (e.target.files) {\n      var filesArray = Array.from(e.target.files).map(function (file) {\n        return URL.createObjectURL(file);\n      });\n      setSelectedImages(function (prevImages) {\n        return prevImages.concat(filesArray);\n      });\n      Array.from(e.target.files).map(function (file) {\n        return URL.revokeObjectURL(file);\n      });\n    }\n  });\n\n  var renderImages = function renderImages(source) {\n    console.log(\"source: \", source);\n    return source.map(function (image) {\n      return __jsx(\"img\", {\n        src: image,\n        key: image,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 20\n        }\n      });\n    });\n  };\n\n  return __jsx(Form, {\n    className: Wrapper.pageWrapper,\n    style: {\n      margin: '10px 0 20px'\n    },\n    encType: \"multipart/form-data\",\n    onFinish: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, __jsx(FileUploadWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    id: \"file\",\n    multiple: true,\n    onChange: imageHandleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"label-holder\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, __jsx(DownloadOutlined, {\n    style: {\n      fontSize: '30px',\n      marginBottom: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }), \"Upload Images\"))), __jsx(\"div\", {\n    className: \"result\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, renderImages(selectedImages))), imagePaths.map(function (v) {\n    return __jsx(\"div\", {\n      key: v,\n      style: {\n        display: 'inline-block'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, __jsx(\"img\", {\n      src: v,\n      style: {\n        width: '200px'\n      },\n      alt: v,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }, __jsx(Button, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, \"\\uC81C\\uAC70\")));\n  }), __jsx(Input.TextArea, {\n    value: text,\n    onChange: onChangeText,\n    rows: 10,\n    placeholder: \"\\uBC18\\uB824\\uB3D9\\uBB3C\\uC5D0 \\uB300\\uD55C \\uC790\\uC720\\uB85C\\uC6B4 \\uAE00\\uC744 \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 \\uD83D\\uDC36 \\uD83D\\uDC39\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }), __jsx(SubmitBtn, {\n    htmlType: \"submit\",\n    loading: addPostLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"\\uC791\\uC131\\uC644\\uB8CC\")));\n};\n\n_s(PostForm, \"IlQplDGhs4CKmIKc0K2r0gQz5Xg=\", false, function () {\n  return [useSelector, useDispatch, useInput];\n});\n\n_c3 = PostForm;\nexport default PostForm;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"SubmitBtn\");\n$RefreshReg$(_c2, \"FileUploadWrapper\");\n$RefreshReg$(_c3, \"PostForm\");","map":{"version":3,"names":["React","useCallback","useState","useRef","useEffect","Form","Input","Button","useDispatch","useSelector","ADD_POST_REQUEST","styled","Wrapper","useInput","DownloadOutlined","SubmitBtn","FileUploadWrapper","div","PostForm","state","post","imagePaths","addPostDone","addPostLoading","dispatch","text","onChangeText","setText","onSubmit","trim","alert","formData","FormData","forEach","p","append","type","data","selectedImages","setSelectedImages","imageHandleChange","e","target","files","filesArray","Array","from","map","file","URL","createObjectURL","prevImages","concat","revokeObjectURL","renderImages","source","console","log","image","pageWrapper","margin","fontSize","marginBottom","v","display","width"],"sources":["/Users/gojieun/Desktop/meong/prepare/front/components/PostForm.js"],"sourcesContent":["import React, { useCallback, useState, useRef, useEffect } from 'react';\nimport {Form, Input, Button} from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {ADD_POST_REQUEST} from '../reducers/post';\nimport styled from 'styled-components';\nimport Wrapper from '../styles/wrapper.module.css';\nimport useInput from '../hooks/useInput';\nimport {DownloadOutlined} from '@ant-design/icons';\n\n\nconst SubmitBtn = styled(Button)`\n    background-color: #FFF3D4;\n    color: #857171;\n    border: none;\n    max-width: 600px;\n    margin: 20px auto;\n    width: 100%;\n    margin-bottom: 40px;\n    height: 40px;\n    font-weight: 500;\n\n    &:hover {\n        background-color: #857171;\n        border: 1px solid #857171;\n        color: white;\n    }\n`;\n\nconst FileUploadWrapper = styled.div`\n\n#file[type=\"file\"] {\n\tdisplay: none;\n}\n\n.label-holder {\n  margin-top: 1em;\n  display: grid;\n  place-items: center;\n  width: 100%;\n  height: 30vh;\n}\n\n.label{\n  display: grid;\n  place-items: center;\n  font-size: 1rem;\n  cursor: pointer;\n  border: 2px dashed gray;\n  border-radius: 5px;\n  width: 100%;\n  padding: 10vh 0;\n}\n\n.label > span {\n    display: flex;\n    flex-direction: column;\n    font-weight: 500;\n    font-size: 1.1rem;\n    color: gray;\n}\n\n.result{\n  width: 100%;\n  margin-top:1rem;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n}\n\nimg{\n  width: 25%;\n  height: 150px;\n  object-fit: fill;\n  padding: 0.5rem;\n}\n`;\n\n\nconst PostForm = () => {\n    const { imagePaths, addPostDone, addPostLoading } = useSelector((state) => state.post);\n    const dispatch = useDispatch();\n    const [text, onChangeText, setText] = useInput('');\n\n    useEffect(() => {\n        if (addPostDone) {\n            setText('');\n        }\n    }, [addPostDone])\n\n    const onSubmit = useCallback(() => {\n        if (!text || !text.trim()) {\n          return alert('게시글을 작성하세요.');\n        }\n        const formData = new FormData();\n        imagePaths.forEach((p) => {\n          formData.append('image', p);\n        });\n        formData.append('content', text);\n        return dispatch({\n          type: ADD_POST_REQUEST,\n          data: formData,\n        });\n      }, [text, imagePaths]);\n    \n    const [selectedImages, setSelectedImages] = useState([]);\n\n    const imageHandleChange = useCallback((e) => {\n        if(e.target.files) {\n            const filesArray = Array.from(e.target.files).map((file) => URL.createObjectURL(file))\n            \n            setSelectedImages((prevImages) => prevImages.concat(filesArray))\n            Array.from(e.target.files).map((file) => URL.revokeObjectURL(file))\n        }\n    })\n\n    const renderImages = (source) => {\n        console.log(\"source: \", source);\n        return source.map((image) => {\n            return <img src={image} key={image} />\n        })\n    }\n\n    return (\n        <Form \n            className={Wrapper.pageWrapper} \n            style={{margin: '10px 0 20px'}} \n            encType='multipart/form-data' \n            onFinish={onSubmit}>\n            <FileUploadWrapper>\n                <input type=\"file\" id=\"file\" multiple onChange={imageHandleChange} />\n                <div className=\"label-holder\" >\n                    <label htmlFor='file' className='label'>\n                        <span>\n                            <DownloadOutlined style={{fontSize: '30px', marginBottom: '10px'}}/>\n                            Upload Images\n                        </span>\n                    </label>\n                </div>\n                <div className='result'>{renderImages(selectedImages)}</div>\n            </FileUploadWrapper>\n            {imagePaths.map((v) => (\n                <div key={v} style={{display: 'inline-block'}}>\n                    <img src={v} style={{width: '200px'}} alt={v} />\n                    <div>\n                        <Button>제거</Button>\n                    </div>\n                </div>\n            ))}\n            <Input.TextArea\n                value={text}\n                onChange={onChangeText}\n                rows={10}\n                placeholder='반려동물에 대한 자유로운 글을 작성해주세요 🐶 🐹'\n            />\n            <SubmitBtn htmlType='submit' loading={addPostLoading}>\n                <span>작성완료</span>\n            </SubmitBtn>\n        </Form>\n    );\n};\n\nexport default PostForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}